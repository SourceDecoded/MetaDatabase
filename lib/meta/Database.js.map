{"version":3,"sources":["../../src/meta/Database.js"],"names":["decorators","database","fileSystem","actions","Array","isArray","Error","edm","name","version","tables","refreshTables","getTables","forEach","table","metaDatabase","Object","keys","map"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;AACA;;;;;;;;;AAII,sBAKQ;AAAA,uFAAJ,EAAI;AAAA,mCAJJA,UAII;AAAA,YAJJA,UAII,mCAJS,EAIT;AAAA,iCAHJC,QAGI;AAAA,YAHJA,QAGI,iCAHO,IAGP;AAAA,mCAFJC,UAEI;AAAA,YAFJA,UAEI,mCAFS,IAET;AAAA,gCADJC,OACI;AAAA,YADJA,OACI,gCADM,IACN;;AAAA;;AAEJ,YAAI,CAACC,MAAMC,OAAN,CAAcL,UAAd,CAAL,EAAgC;AAC5B,kBAAM,IAAIM,KAAJ,CAAU,oDAAV,CAAN;AACH;;AAED,YAAIL,YAAY,IAAhB,EAAsB;AAClB,kBAAM,IAAIK,KAAJ,CAAU,iEAAV,CAAN;AACH;;AAED,YAAIJ,cAAc,IAAlB,EAAwB;AACpB,kBAAM,IAAII,KAAJ,CAAU,mEAAV,CAAN;AACH;;AAED,aAAKL,QAAL,GAAgBA,QAAhB;AACA,aAAKD,UAAL,GAAkBA,UAAlB;AACA,aAAKO,GAAL,GAAWN,SAASM,GAApB;AACA,aAAKC,IAAL,GAAY,KAAKD,GAAL,CAASC,IAArB;AACA,aAAKC,OAAL,GAAe,KAAKF,GAAL,CAASE,OAAxB;AACA,aAAKP,UAAL,GAAkBA,UAAlB;AACA,aAAKQ,MAAL,GAAc,EAAd;;AAEA,aAAKC,aAAL;AACH;;;;wCAEe;AAAA;;AACZ,iBAAKV,QAAL,CAAcU,aAAd;AACA,iBAAKV,QAAL,CAAcW,SAAd,GAA0BC,OAA1B,CAAkC,UAACC,KAAD,EAAW;AACzC,sBAAKJ,MAAL,CAAYI,MAAMN,IAAlB,IAA0B,oBAAU;AAChCO,uCADgC;AAEhCD,2BAAOA,KAFyB;AAGhCd,gCAAY,MAAKA,UAHe;AAIhCE,gCAAY,MAAKA;AAJe,iBAAV,CAA1B;AAMH,aAPD;AAQH;;;iCAEQM,I,EAAM;AACX,mBAAO,KAAKE,MAAL,CAAYF,IAAZ,KAAqB,IAA5B;AACH;;;oCAEW;AAAA;;AACR,mBAAOQ,OAAOC,IAAP,CAAY,KAAKP,MAAjB,EAAyBQ,GAAzB,CAA6B,UAACV,IAAD,EAAU;AAC1C,uBAAO,OAAKE,MAAL,CAAYF,IAAZ,CAAP;AACH,aAFM,CAAP;AAGH","file":"Database.js","sourcesContent":["import Table from \"./Table\";\nimport path from \"path\";\nimport fileSystem from \"fs\";\n\nexport default class {\n\n    constructor({\n        decorators = [],\n        database = null,\n        fileSystem = null,\n        actions = null\n    } = {}) {\n\n        if (!Array.isArray(decorators)) {\n            throw new Error(\"Invalid Argument: decorators needs to be an array.\");\n        }\n\n        if (database == null) {\n            throw new Error(\"Null Argument Exception: MetaDatabase needs to have a database.\");\n        }\n\n        if (fileSystem == null) {\n            throw new Error(\"Null Argument Exception: MetaDatabase needs to have a fileSystem.\");\n        }\n\n        this.database = database;\n        this.decorators = decorators;\n        this.edm = database.edm;\n        this.name = this.edm.name;\n        this.version = this.edm.version;\n        this.fileSystem = fileSystem;\n        this.tables = {};\n\n        this.refreshTables();\n    }\n\n    refreshTables() {\n        this.database.refreshTables();\n        this.database.getTables().forEach((table) => {\n            this.tables[table.name] = new Table({\n                metaDatabase: this,\n                table: table,\n                decorators: this.decorators,\n                fileSystem: this.fileSystem\n            });\n        });\n    }\n\n    getTable(name) {\n        return this.tables[name] || null;\n    }\n\n    getTables() {\n        return Object.keys(this.tables).map((name) => {\n            return this.tables[name];\n        });\n    }\n\n}"]}