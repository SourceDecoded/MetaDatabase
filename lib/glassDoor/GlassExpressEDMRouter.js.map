{"version":3,"sources":["../../src/glassDoor/GlassExpressEDMRouter.js"],"names":["app","pane","enabled","handler","Router","use","req","res","next","status","send","json","post","params","name","version","edm"],"mappings":";;;;;;;;AAAA;;;;AACA;;;;;;;;AAEA;;;AAGI,oBAAaA,GAAb,EAAkBC,IAAlB,EAAuB;AAAA;;AACnB,aAAKD,GAAL,GAAWA,GAAX;AACA,aAAKC,IAAL,GAAYA,IAAZ;AACA,aAAKC,OAAL,GAAe,IAAf;AACH;;;;kCAES;AACN,iBAAKA,OAAL,GAAe,KAAf;AACH;;;iCAEQ;AAAA;;AACL,gBAAIC,UAAU,kBAAQC,MAAR,EAAd;;AAEAD,oBAAQE,GAAR,CAAY,UAACC,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAC5B,oBAAI,MAAKN,OAAT,EAAkB;AACdM;AACH,iBAFD,MAEO;AACHD,wBAAIE,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB,6BAArB;AACH;AACJ,aAND;AAOAP,oBAAQE,GAAR,CAAY,qBAAWM,IAAX,EAAZ;;AAEAR,oBAAQS,IAAR,CAAa,iBAAb,EAAgC,UAACN,GAAD,EAAMC,GAAN,EAAWC,IAAX,EAAoB;AAAA,kCAC1BF,IAAIO,MADsB;AAAA,oBAC3CC,IAD2C,eAC3CA,IAD2C;AAAA,oBACrCC,OADqC,eACrCA,OADqC;AAEhD;AACH,aAHD;;AAKA,iBAAKf,GAAL,CAASK,GAAT,OAAiB,KAAKJ,IAAL,CAAUe,GAAV,CAAcF,IAA/B,SAAuC,KAAKb,IAAL,CAAUe,GAAV,CAAcD,OAArD,EAAgEZ,OAAhE;AACH","file":"GlassExpressEDMRouter.js","sourcesContent":["import express from \"express\";\nimport bodyParser from \"body-parser\";\n\n// listen to\n\nexport default class {\n    constructor (app, pane){\n        this.app = app;\n        this.pane = pane;\n        this.enabled = true;\n    }\n\n    dispose() {\n        this.enabled = false;\n    }\n\n    attach() {\n        let handler = express.Router();\n\n        handler.use((req, res, next) => {\n            if (this.enabled) {\n                next();\n            } else {\n                res.status(500).send(\"This API is no longer valid\");\n            }\n        });\n        handler.use(bodyParser.json());\n\n        handler.post(\"/:name/:version\", (req, res, next) => {\n            let {name, version} = req.params;\n            // get the commands\n        });\n\n        this.app.use(`/${this.pane.edm.name}/${this.pane.edm.version}`, handler);\n    }\n}"]}